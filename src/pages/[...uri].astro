---
import PageLayout from '@/layouts/page.astro';
import { getNodeByUri } from "@/lib/api";
import '@/styles/globals.css';

console.log(Astro.url.pathname)
const nodeData = await getNodeByUri(Astro.url.pathname);

if (!nodeData) {
  // return {
  //   status: 404,
  //   // headers: {
  //   //   "Cache-Control": "max-age=600, must-revalidate",
  //   // },
  // };
  return new Response("Not found", { status: 404 });
}
// Astro.response.headers.set("Cache-Control", "max-age=600, must-revalidate");
---
<PageLayout menuItems={nodeData?.menus?.nodes?.[0]?.menuItems?.nodes || []}>
	<pre>
		{JSON.stringify(nodeData, null, 2)}
	</pre>
</PageLayout>
